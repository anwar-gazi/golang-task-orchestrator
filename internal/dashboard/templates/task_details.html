{{define "content"}}
<div style="margin-bottom: 1rem;">
  <a href="/tasks">‚Üê Back to Tasks</a>
</div>

<div class="card">
  <div style="display: flex; justify-content: space-between; align-items: start;">
    <div>
      <h2 style="margin-top: 0">Task Details</h2>
      <div style="color: var(--text-light)">ID: {{.Task.ID}}</div>
    </div>
    <span class="badge badge-{{.Task.Status}}" style="font-size: 1rem; padding: 0.5rem 1rem;">{{.Task.Status}}</span>
  </div>

  <div class="grid" style="margin-top: 2rem;">
    <div>
      <strong>Type:</strong> {{.Task.Type}}
    </div>
    <div>
      <strong>Priority:</strong> {{.Task.Priority}}
    </div>
    <div>
      <strong>Attempts:</strong> {{.Task.Attempts}} / {{.Task.MaxRetries}}
    </div>
    <div>
      <strong>Idempotency Key:</strong> {{if .Task.IdempotencyKey}}{{.Task.IdempotencyKey}}{{else}}-{{end}}
    </div>
  </div>

  <div class="grid">
    <div>
      <strong>Created:</strong><br>
      {{formatTime .Task.CreatedAt}}
    </div>
    <div>
      <strong>Started:</strong><br>
      {{formatTime .Task.StartedAt}}
    </div>
    <div>
      <strong>Completed:</strong><br>
      {{formatTime .Task.CompletedAt}}
    </div>
  </div>

  {{if .Task.LastError}}
  <div style="margin-top: 1rem;">
    <strong>Last Error:</strong>
    <div style="background: #fee2e2; color: #991b1b; padding: 1rem; border-radius: 0.375rem; margin-top: 0.5rem;">
      {{.Task.LastError}}
    </div>
  </div>
  {{end}}

  <div style="margin-top: 2rem;">
    <h3>Payload</h3>
    <div class="code-block">{{.Payload}}</div>
  </div>
</div>
{{end}}